# Спецификация системы соблазнения

## Обзор

Система соблазнения является уникальной механикой игры, позволяющей игроку взаимодействовать с NPC через романтические и социальные механики. Система основана на управлении привязанностью и использовании различных стратегий для достижения успеха.

## Архитектура

### Класс SeductionSystem

```python
class SeductionSystem:
    def __init__(self):
        # Характеристики игрока
        # Цель соблазнения
        # Словарь целей
        # Настройки системы
```

### Основные компоненты

1. **Характеристики игрока**

   - Харизма (Charm) и максимальная харизма
   - Уверенность (Confidence) и максимальная уверенность
   - Репутация (Reputation)

2. **Цель соблазнения**

   - Имя цели
   - Уровень привязанности (Affection)
   - Сложность соблазнения (Difficulty)
   - Личность цели (Personality)

3. **Система прогресса**
   - Отслеживание привязанности
   - Расчет шансов успеха
   - Определение результата

## Механики соблазнения

### 1. Система характеристик

#### Харизма (Charm)

- **Базовое значение**: 5
- **Максимум**: 10
- **Влияние**: Увеличивает шанс успеха всех действий
- **Развитие**: Тренировки, экипировка, зелья

#### Уверенность (Confidence)

- **Базовое значение**: 5
- **Максимум**: 10
- **Влияние**: Модификатор для комплиментов и разговоров
- **Изменение**: Успехи повышают, неудачи снижают

#### Репутация (Reputation)

- **Диапазон**: -10 до 10
- **Влияние**: Доступ к определенным целям
- **Изменение**: Успешные соблазнения повышают, неудачи снижают

### 2. Система привязанности

#### Уровень привязанности (Affection)

- **Диапазон**: 0 до 100
- **Цель**: Достичь уровня сложности цели
- **Изменение**: Действия игрока увеличивают привязанность

#### Сложность соблазнения (Difficulty)

- **Диапазон**: 30 до 100
- **Определяет**: Необходимый уровень привязанности для успеха
- **Зависит от**: Личности и статуса цели

### 3. Типы действий

#### Комплименты

```python
def compliment(compliment_type="general"):
    # Базовый шанс: 60%
    # Модификаторы: харизма, уверенность, тип комплимента
    # Награда: 5-15 привязанности
```

**Типы комплиментов:**

- **Общий**: Базовый шанс, +0 модификатор
- **Внешность**: +10 модификатор
- **Интеллект**: +15 модификатор
- **Характер**: +20 модификатор
- **Флиртующий**: +25 модификатор

#### Подарки

```python
def gift(gift_type="flower"):
    # Гарантированное увеличение привязанности
    # Стоимость: 10-200 золота
    # Эффект: 10-40 привязанности
```

**Типы подарков:**

- **Цветы**: 10 золота, +10 привязанности
- **Книга**: 25 золота, +15 привязанности
- **Вино**: 30 золота, +20 привязанности
- **Драгоценности**: 100 золота, +25 привязанности
- **Дорогой подарок**: 200 золота, +40 привязанности

#### Разговоры

```python
def conversation(topic="casual"):
    # Шанс успеха зависит от темы и харизмы
    # Награда: 5-25 привязанности
    # Риск: Неудача может снизить уверенность
```

**Темы разговоров:**

- **Обычная**: 70% шанс, 5-10 привязанности
- **Личная**: 50% шанс, 10-20 привязанности
- **Романтическая**: 40% шанс, 15-25 привязанности
- **Интеллектуальная**: 60% шанс, 8-15 привязанности

### 4. Попытка соблазнения

#### Решительный шаг

```python
def attempt_seduction():
    # Шанс = прогресс + харизма*5 + уверенность*3
    # Успех: мгновенная победа
    # Неудача: -2 уверенности
```

## Цели соблазнения

### 1. Дочь торговца

```python
{
    "name": "Дочь торговца",
    "affection": 0,
    "difficulty": 40,
    "personality": "shy",
    "description": "Застенчивая девушка, которая помогает отцу в лавке"
}
```

**Характеристики:**

- Низкая сложность (40)
- Застенчивая личность
- Предпочитает комплименты внешности
- Легко поддается на подарки

### 2. Благородная леди

```python
{
    "name": "Благородная леди",
    "affection": 0,
    "difficulty": 70,
    "personality": "mysterious",
    "description": "Таинственная аристократка с загадочным прошлым"
}
```

**Характеристики:**

- Высокая сложность (70)
- Таинственная личность
- Предпочитает интеллектуальные разговоры
- Требует дорогие подарки

### 3. Таверная девка

```python
{
    "name": "Таверная девка",
    "affection": 0,
    "difficulty": 30,
    "personality": "aggressive",
    "description": "Дерзкая и прямолинейная девушка из таверны"
}
```

**Характеристики:**

- Очень низкая сложность (30)
- Агрессивная личность
- Предпочитает флиртующие комплименты
- Быстро поддается на ухаживания

## Личности целей

### 1. Застенчивая (Shy)

- **Модификаторы**: +10 к комплиментам внешности, -10 к флиртующим
- **Предпочтения**: Мягкие комплименты, цветы, обычные разговоры
- **Стратегия**: Постепенное сближение

### 2. Таинственная (Mysterious)

- **Модификаторы**: +15 к интеллектуальным разговорам, +10 к дорогим подаркам
- **Предпочтения**: Глубокие разговоры, драгоценности, загадки
- **Стратегия**: Демонстрация интеллекта и богатства

### 3. Агрессивная (Aggressive)

- **Модификаторы**: +20 к флиртующим комплиментам, -5 к обычным
- **Предпочтения**: Прямые комплименты, вино, романтические разговоры
- **Стратегия**: Смелые и прямые действия

## Цикл соблазнения

### 1. Инициализация

```python
def start_seduction(target_type="merchant_daughter"):
    # Установка цели
    # Сброс привязанности
    # Начало соблазнения
```

### 2. Основной цикл

1. **Отображение статуса**

   - Имя цели
   - Уровень привязанности
   - Прогресс в процентах
   - Характеристики игрока

2. **Выбор действия**

   - Сделать комплимент
   - Подарить подарок
   - Завести разговор
   - Попытаться соблазнить

3. **Применение действия**

   - Расчет шанса успеха
   - Определение результата
   - Обновление привязанности

4. **Проверка успеха**
   - Сравнение с уровнем сложности
   - Определение результата

### 3. Завершение

```python
def is_seduction_successful():
    # Проверка привязанности >= сложности
    # Возврат: True/False
```

## Результаты соблазнения

### Успех

- Получение опыта (30)
- Получение золота (100)
- Улучшение навыка "Искусство соблазнения" (+20 опыта)
- Повышение репутации (+2)
- Разблокировка достижений

### Неудача

- Потеря репутации (-1)
- Возможность повторить попытку
- Сохранение прогресса

## Интеграция с другими системами

### С системой прокачки

- Успешное соблазнение дает опыт
- Улучшает навык "Искусство соблазнения"
- Разблокирует достижение "Мастер соблазнения"

### С системой инвентаря

- Использование зелья любви
- Покупка подарков
- Экипировка влияет на харизму

### С системой боя

- Репутация влияет на доступ к некоторым боям
- Успешные соблазнения повышают репутацию

## API системы

### Основные методы

#### Управление соблазнением

```python
start_seduction(target_type)    # Начать соблазнение
reset_seduction()               # Сбросить соблазнение
is_seduction_successful()       # Проверить успех
get_seduction_progress()        # Получить прогресс
```

#### Действия

```python
compliment(compliment_type)     # Сделать комплимент
gift(gift_type)                 # Подарить подарок
conversation(topic)             # Завести разговор
```

### Доступ к данным

```python
seduction_system.target_name        # Имя цели
seduction_system.target_affection   # Привязанность
seduction_system.player_charm       # Харизма игрока
seduction_system.targets            # Словарь целей
```

## Баланс и настройки

### Базовые значения

- **Харизма игрока**: 5
- **Уверенность игрока**: 5
- **Базовый шанс комплимента**: 60%
- **Модификатор харизмы**: +2% за очко
- **Модификатор уверенности**: +1.5% за очко

### Модификаторы действий

- **Общий комплимент**: +0%
- **Комплимент внешности**: +10%
- **Комплимент ума**: +15%
- **Комплимент характера**: +20%
- **Флиртующий комплимент**: +25%

### Стоимость подарков

- **Цветы**: 10 золота
- **Книга**: 25 золота
- **Вино**: 30 золота
- **Драгоценности**: 100 золота
- **Дорогой подарок**: 200 золота

## Планы развития

### Краткосрочные цели

- [ ] Добавление новых целей
- [ ] Система свиданий
- [ ] Специальные события
- [ ] Система отношений

### Долгосрочные цели

- [ ] Многопользовательские взаимодействия
- [ ] Система брака
- [ ] Дети и семья
- [ ] Социальные сети

## Тестирование

### Тестовые сценарии

1. **Базовое соблазнение**: Дочь торговца
2. **Сложное соблазнение**: Благородная леди
3. **Быстрое соблазнение**: Таверная девка
4. **Использование подарков**: Различные типы подарков
5. **Система неудач**: Проверка снижения уверенности

### Метрики баланса

- Среднее время соблазнения: 5-10 действий
- Шанс успеха: 70-90% при правильной стратегии
- Использование подарков: 30-50% попыток
- Разнообразие стратегий: Все действия должны быть полезны

## Заключение

Система соблазнения обеспечивает глубокое социальное взаимодействие в игре. Модульная архитектура позволяет легко добавлять новых персонажей и механики, сохраняя при этом баланс и разнообразие игрового процесса.

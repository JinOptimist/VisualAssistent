# Спецификация системы прокачки

## Обзор

Система прокачки является основой развития персонажа в игре, управляя уровнем, опытом, характеристиками и навыками. Система обеспечивает долгосрочную мотивацию игрока и различные пути развития персонажа.

## Архитектура

### Класс ProgressionSystem

```python
class ProgressionSystem:
    def __init__(self):
        # Базовые характеристики
        # Уровень и опыт
        # Навыки и достижения
        # Настройки системы
```

### Основные компоненты

1. **Базовые характеристики**

   - Сила (Strength)
   - Интеллект (Intelligence)
   - Живучесть (Vitality)
   - Ловкость (Agility)
   - Харизма (Charisma)

2. **Система уровней**

   - Текущий уровень
   - Опыт и опыт до следующего уровня
   - Очки характеристик

3. **Система навыков**
   - Владение мечом
   - Искусство соблазнения
   - Торговля
   - Выживание

## Механики прокачки

### 1. Система характеристик

#### Сила (Strength)

- **Базовое значение**: 5
- **Максимум**: 20
- **Влияние**: +0.5 к урону за очко
- **Развитие**: Бои, тренировки, экипировка

#### Интеллект (Intelligence)

- **Базовое значение**: 5
- **Максимум**: 20
- **Влияние**: +1.5 к максимальной мане за очко
- **Развитие**: Чтение книг, заклинания, торговля

#### Живучесть (Vitality)

- **Базовое значение**: 5
- **Максимум**: 20
- **Влияние**: +2 к максимальному здоровью за очко
- **Развитие**: Бои, выживание, тренировки

#### Ловкость (Agility)

- **Базовое значение**: 5
- **Максимум**: 20
- **Влияние**: +1% к шансу уклонения за очко
- **Развитие**: Исследования, тренировки, экипировка

#### Харизма (Charisma)

- **Базовое значение**: 5
- **Максимум**: 20
- **Влияние**: +2% к шансу успеха в соблазнении за очко
- **Развитие**: Соблазнение, торговля, социальные взаимодействия

### 2. Система уровней

#### Опыт и уровни

```python
def calculate_exp_for_level(level):
    # Формула: 100 * level^1.5
    # Уровень 1: 100 опыта
    # Уровень 2: 283 опыта
    # Уровень 3: 520 опыта
    # Уровень 4: 800 опыта
    # Уровень 5: 1118 опыта
```

#### Получение опыта

- **Победа в бою**: 20-50 опыта (зависит от противника)
- **Успешное соблазнение**: 30 опыта
- **Тренировка**: 10-25 опыта
- **Исследование**: 5-15 опыта
- **Торговля**: 5-20 опыта

#### Повышение уровня

```python
def level_up():
    # Проверка достаточности опыта
    # Увеличение уровня
    # Добавление очков характеристик (3 очка)
    # Восстановление здоровья и маны
    # Уведомление игрока
```

### 3. Система навыков

#### Владение мечом (Sword Mastery)

- **Максимальный уровень**: 100
- **Развитие**: Победы в боях (+1-3 за победу)
- **Эффекты**:
  - Уровень 10: +1 к урону
  - Уровень 25: +2 к урону
  - Уровень 50: +3 к урону
  - Уровень 75: +4 к урону
  - Уровень 100: +5 к урону

#### Искусство соблазнения (Seduction Art)

- **Максимальный уровень**: 100
- **Развитие**: Успешные соблазнения (+5-10 за успех)
- **Эффекты**:
  - Уровень 10: +5% к шансу успеха
  - Уровень 25: +10% к шансу успеха
  - Уровень 50: +15% к шансу успеха
  - Уровень 75: +20% к шансу успеха
  - Уровень 100: +25% к шансу успеха

#### Торговля (Trading)

- **Максимальный уровень**: 100
- **Развитие**: Успешные сделки (+1-3 за сделку)
- **Эффекты**:
  - Уровень 10: +5% к цене продажи
  - Уровень 25: +10% к цене продажи
  - Уровень 50: +15% к цене продажи
  - Уровень 75: +20% к цене продажи
  - Уровень 100: +25% к цене продажи

#### Выживание (Survival)

- **Максимальный уровень**: 100
- **Развитие**: Исследования, выживание (+1-2 за действие)
- **Эффекты**:
  - Уровень 10: +10% к восстановлению здоровья
  - Уровень 25: +20% к восстановлению здоровья
  - Уровень 50: +30% к восстановлению здоровья
  - Уровень 75: +40% к восстановлению здоровья
  - Уровень 100: +50% к восстановлению здоровья

### 4. Система достижений

#### Боевые достижения

- **Первая кровь**: Победить первого противника
- **Охотник**: Победить 10 противников
- **Воин**: Победить 50 противников
- **Легенда**: Победить 100 противников
- **Мастер меча**: Достичь 100 уровня владения мечом

#### Социальные достижения

- **Первая любовь**: Успешно соблазнить первого персонажа
- **Сердцеед**: Соблазнить 5 персонажей
- **Мастер соблазнения**: Достичь 100 уровня искусства соблазнения
- **Торговец**: Провести 50 сделок
- **Мастер торговли**: Достичь 100 уровня торговли

#### Общие достижения

- **Путешественник**: Посетить все локации
- **Исследователь**: Выполнить 100 исследований
- **Выживший**: Достичь 100 уровня выживания
- **Всесторонний**: Достичь 10 уровня во всех навыках

## Цикл прокачки

### 1. Получение опыта

```python
def gain_experience(amount, source="general"):
    # Добавление опыта
    # Проверка повышения уровня
    # Обновление навыков
    # Уведомление игрока
```

### 2. Повышение уровня

1. **Проверка опыта**

   - Сравнение с требуемым опытом
   - Определение возможности повышения

2. **Повышение уровня**

   - Увеличение уровня на 1
   - Добавление очков характеристик
   - Восстановление здоровья и маны

3. **Уведомление**
   - Сообщение о повышении уровня
   - Отображение новых очков
   - Возможность распределения

### 3. Распределение очков

```python
def allocate_stat_point(stat_name):
    # Проверка наличия очков
    # Увеличение характеристики
    # Обновление зависимых систем
    # Сохранение изменений
```

## Интеграция с другими системами

### С боевой системой

- Характеристики влияют на боевые параметры
- Победы дают опыт и улучшают навыки
- Достижения разблокируют новые возможности

### С системой соблазнения

- Харизма влияет на успех соблазнения
- Успешные соблазнения дают опыт
- Навык соблазнения улучшает шансы

### С системой инвентаря

- Характеристики влияют на экипировку
- Торговля дает опыт
- Навык торговли влияет на цены

## API системы

### Основные методы

#### Управление опытом

```python
gain_experience(amount, source)    # Получить опыт
get_current_exp()                  # Текущий опыт
get_exp_to_next_level()            # Опыт до следующего уровня
```

#### Управление уровнем

```python
level_up()                         # Повысить уровень
get_current_level()                # Текущий уровень
can_level_up()                     # Можно ли повысить уровень
```

#### Управление характеристиками

```python
allocate_stat_point(stat_name)     # Распределить очко
get_stat(stat_name)                # Получить значение характеристики
get_available_points()             # Доступные очки
```

#### Управление навыками

```python
improve_skill(skill_name, amount)  # Улучшить навык
get_skill_level(skill_name)        # Уровень навыка
get_skill_effects(skill_name)      # Эффекты навыка
```

### Доступ к данным

```python
progression_system.level           # Текущий уровень
progression_system.experience      # Текущий опыт
progression_system.stats           # Словарь характеристик
progression_system.skills          # Словарь навыков
```

## Баланс и настройки

### Базовые значения

- **Начальный уровень**: 1
- **Очки характеристик за уровень**: 3
- **Максимальный уровень**: 50
- **Базовые характеристики**: 5 каждая

### Формулы опыта

- **Опыт для уровня**: 100 \* level^1.5
- **Опыт за победу**: 20 + (уровень противника \* 5)
- **Опыт за соблазнение**: 30
- **Опыт за тренировку**: 10 + (время \* 2)

### Модификаторы характеристик

- **Сила**: +0.5 урона за очко
- **Интеллект**: +1.5 маны за очко
- **Живучесть**: +2 здоровья за очко
- **Ловкость**: +1% уклонения за очко
- **Харизма**: +2% успеха соблазнения за очко

## Планы развития

### Краткосрочные цели

- [ ] Добавление новых навыков
- [ ] Система специализаций
- [ ] Временные баффы
- [ ] Система престижа

### Долгосрочные цели

- [ ] Многопользовательская прокачка
- [ ] Система гильдий
- [ ] Сезонные события
- [ ] Система рейтингов

## Тестирование

### Тестовые сценарии

1. **Базовая прокачка**: Получение опыта и повышение уровня
2. **Распределение очков**: Тестирование всех характеристик
3. **Развитие навыков**: Проверка всех навыков
4. **Достижения**: Разблокировка всех достижений
5. **Интеграция**: Взаимодействие с другими системами

### Метрики баланса

- Время до 10 уровня: 2-3 часа
- Время до 25 уровня: 8-12 часов
- Время до 50 уровня: 20-30 часов
- Равномерность развития: Все пути должны быть жизнеспособны

## Заключение

Система прокачки обеспечивает долгосрочную мотивацию и разнообразие путей развития персонажа. Модульная архитектура позволяет легко добавлять новые навыки и достижения, сохраняя при этом баланс игры.

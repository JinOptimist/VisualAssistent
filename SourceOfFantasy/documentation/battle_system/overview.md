# Боевая система - Обзор

## Описание

Боевая система является одной из ключевых механик игры, обеспечивающей динамичные сражения между игроком и противниками. Система построена на пошаговой механике с элементами стратегического планирования.

## Основные механики

### Система здоровья и маны

- **Здоровье (HP)**: Базовое значение 10, увеличивается с уровнем
- **Мана (MP)**: Базовое значение 10, увеличивается с интеллектом
- **Восстановление**: Зелья, заклинания, отдых
- **Потеря**: Атаки противника, эффекты переполнения

### Система атак

#### Атака Снарядом

- **Стоимость**: 1 MP
- **Урон**: 1
- **Особенности**: Щит противника блокирует урон и разрушается

#### Атака Потоком

- **Стоимость**: 2 MP
- **Урон**: 1 за ход в течение 3 ходов
- **Особенности**: Активирует статус "Атака Потоком", персонаж не может выполнять другие действия

### Система защиты

#### Щит

- **Создание**: 1 MP
- **Эффект**: Блокирует 1 атаку
- **Максимум**: Нет ограничений

#### Уклонение

- **Активация**: Бесплатно
- **Эффект**: Блокирует следующую атаку противника (не создает щит)
- **Длительность**: 1 ход

### Система лечения

- **Стоимость**: 2 MP
- **Эффект**: Восстанавливает 2 HP
- **Особенности**: Может вызвать переполнение кровью

### Система переполнения

#### Переполнение кровью

- **Условие**: HP > max_HP
- **Эффект**: Потеря 1 HP и потеря 2 MP за ход
- **Снятие**: Автоматически при нормализации HP

#### Переполнение маной

- **Условие**: MP > max_MP
- **Эффект**: Потеря 1 HP и потеря 2 MP за ход
- **Снятие**: Автоматически при нормализации MP

## Противники

### 1. Гоблин

- **Здоровье**: 5
- **Мана**: 3
- **Атака**: 1
- **Защита**: 0
- **Характеристики**: Слабый, но быстрый противник

### 2. Орк

- **Здоровье**: 8
- **Мана**: 2
- **Атака**: 2
- **Защита**: 1
- **Характеристики**: Сбалансированный противник

### 3. Тролль

- **Здоровье**: 12
- **Мана**: 1
- **Атака**: 3
- **Защита**: 2
- **Характеристики**: Очень выносливый противник

## Боевой процесс

### Основной цикл

1. Применение эффектов статусов (переполнение, "Атака Потоком")
2. Отображение статуса (HP/MP, щиты, статусы)
3. Выбор действия игрока (если не под эффектом "Атака Потоком")
4. Выполнение действия игрока
5. Проверка окончания боя
6. Ход противника (если не под эффектом "Атака Потоком")
7. Проверка окончания боя
8. Переход к следующему ходу

### Условия окончания боя

- **Победа игрока**: HP противника ≤ 0
- **Победа противника**: HP игрока ≤ 0
- **Ничья**: У обоих закончилась мана, но никто не победил

## Баланс игры

### Базовые значения

- **Здоровье игрока**: 10
- **Мана игрока**: 10
- **Стоимость атаки снарядом**: 1 MP
- **Стоимость атаки потоком**: 2 MP
- **Стоимость уклонения**: Бесплатно
- **Стоимость лечения**: 2 MP
- **Урон атаки снарядом**: 1
- **Урон атаки потоком**: 1 (за ход, 3 хода подряд)
- **Лечение**: 2 HP

### Модификаторы характеристик

- **Сила**: +0.5 к урону за очко
- **Интеллект**: +1.5 к максимальной мане за очко
- **Живучесть**: +2 к максимальному здоровью за очко

## Игровой опыт

### Стратегические элементы

- Управление маной и здоровьем
- Выбор между атакой и защитой/уклонением
- Использование статуса "Атака Потоком"
- Предотвращение переполнения

### Тактические решения

- Создание щитов в нужный момент
- Лечение при низком здоровье
- Использование "Атаки Потоком" для давления
- Адаптация к стилю противника

## Интеграция с другими системами

### С системой прокачки

- Победа дает опыт
- Улучшает навык "Владение мечом"
- Разблокирует достижения

### С системой инвентаря

- Использование зелий в бою
- Экипировка влияет на характеристики
- Получение предметов после победы

### С системой репутации

- Репутация влияет на доступ к некоторым боям
- Победы повышают репутацию
